/*! spark-client-app 2014-10-17 */
function extractJSONData(a){var b=[];if(!a)throw new Error("Received data is empty");return b=a.locations_list}function showSuccess(a){var b='<span class="success">Success!</span>';tq.querySelector(a).after(b)}function callTinderAjax(){var a="http://ironhack-meet-me-api.herokuapp.com/locations.json";TinderAjax.getJSON(a,function(a){console.log("TinderAjax.getJSON data:",a),locations=extractJSONData(a),showSuccess("#ajax")})}function callTinderStorage(){locations.forEach(function(a){storage.create(a.name,a)}),showSuccess("#save")}function callTinderNotification(){var a={icon:"https://maps.googleapis.com/maps/api/staticmap?center=40.714728,-73.998672&zoom=12&size=100x100",body:"Carrer Alaba 61, Barcelona."};notification.notificate("Itnig",a)}function callTinderQuery(){locations.forEach(function(a){var b="<li>"+a.name+"</li>";tq.querySelector("#list").append(b)}),showSuccess("#populate")}function callTinderGeolocate(){geolocation.geolocate(function(a){console.log(a)})}var locations=[],tq=new TinderQuery,storage=TinderStorage.getInstance(),notification=TinderNotification.getInstance(),geolocation=new TinderGeolocation;tq.querySelector("#ajax").on("click",function(){callTinderAjax()}),tq.querySelector("#save").on("click",function(){callTinderStorage()}),tq.querySelector("#populate").on("click",function(){callTinderQuery()}),tq.querySelector("#geolocate").on("click",function(){callTinderGeolocate()}),tq.querySelector("#notify").on("click",function(){callTinderNotification()});var TinderAjax=function(){function a(){if(200!=xmlhttp.status)throw new Error("There was an error "+xmlhttp.status);var a=JSON.parse(xmlhttp.response);c(a)}function b(b,d){if(!window.XMLHttpRequest)throw new Error("Ajax is not supported!");c=d,xmlhttp=new XMLHttpRequest,xmlhttp.open("GET",b),xmlhttp.setRequestHeader("Accept","application/json"),xmlhttp.onload=a,xmlhttp.send()}var c;return{getJSON:b}}(),TinderGeolocation=function(){function a(a){c(a.coords)}function b(){throw new Error("Could not get latitude and longitude")}var c;this.geolocate=function(d){c=d,navigator.geolocation&&navigator.geolocation.getCurrentPosition(a,b)}},TinderNotification=function(){function a(){this.notificate=function(a,b){"denied"!==Notification.permission&&Notification.requestPermission(function(c){"granted"===c&&(notification=new Notification(a,b))})}}var b,c={getInstance:function(c,d){return void 0===b&&(b=new a(c,d)),b}};return c}(),TinderQuery=function(){this.element};TinderQuery.prototype.querySelector=function(a){return"#"===a[0]?(this.element=document.getElementById(a.substr(1)),this):"."===a[0]?(this.element=document.getElementsByClassName(a.substr(1))[0],this):(this.element=document.getElementsByTagName(a)[0],this)},TinderQuery.prototype.on=function(a,b){return this.element.addEventListener(a,b),this},TinderQuery.prototype.append=function(a){return this.element.innerHTML+=a,this},TinderQuery.prototype.after=function(a){return this.element.insertAdjacentHTML("afterend",a),this};